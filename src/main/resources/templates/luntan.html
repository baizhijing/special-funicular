<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:v-on="http://www.w3.org/1999/xhtml" xmlns:v-bind="http://www.w3.org/1999/xhtml">
	<head>
		<meta charset="utf-8">
		<title>小白装机网</title>
		<link href="css/luntan.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div id="main">
			<div id="top">
				<div id="image"></div>
				<div id="daohang">
					<ul>
					  <li><a href="http://localhost:8080/index">主页</a></li>
					  <li><a class="active" href="http://localhost:8080/luntan">论坛</a></li>
					  <li><a href="http://localhost:8080/ziyuan">资源</a></li>
					  <li><a href="http://localhost:8080/gerenzhongxin">个人中心</a></li>
					</ul>
				</div>
			</div>
			<div id="body">
				<div id="body_left">
					<div id="body_left_top"></div>
					<!-- 分页 -->
					<div id="body_left_bottom">
						<div class="page-bar">
						    <ul>
						        <li v-if="cur>1"><a v-on:click="cur--,pageClick()">上一页</a></li>
						        <li v-if="cur==1"><a class="banclick">上一页</a></li>
						        <li v-for="index in indexs"  v-bind:class="{ 'active': cur == index}">
						            <a v-on:click="btnClick(index)">{{ index }}</a>
						        </li>
						        <li v-if="cur!=all"><a v-on:click="cur++,pageClick()">下一页</a></li>
						        <li v-if="cur == all"><a class="banclick">下一页</a></li>
						        <li><a>共<i>{{all}}</i>页</a></li>
						    </ul>
						</div>
					</div>
				</div>
				<div id="body_right">
					<div id="body_right_top">
						<ul>
							<li>用户名：<br /></li>
							<li>等级：</li>
						</ul>
					</div>
					<button class="button">发表新帖</button>
				</div>
			</div>
			<div id="bottom"></div>
		</div>
	</body>
	<script src="js/vue.min.js"></script>
	<script src="js/axios.min.js"></script>
	<script type="text/javascript">
	// window.onload=function () {
	// 	new Vue({
	//
	// 	})
	// }
	var pageBar = new Vue({
	    el: '.page-bar',
	    data: {
	        all: 8, //总页数
	        cur: 1//当前页码
	    },
	    watch: {
	        cur: function(oldValue , newValue){
	            console.log(arguments);
	        }
	    },    
	     methods: {
	        btnClick: function(data){//页码点击事件
	            if(data != this.cur){
	                this.cur = data 
	            }
	        },
	        pageClick: function(){
	            console.log('现在在'+this.cur+'页');
	        }
	    },
	    
	    computed: {
	        indexs: function(){
	          var left = 1;
	          var right = this.all;
	          var ar = [];
	          if(this.all>= 5){
	            if(this.cur > 3 && this.cur < this.all-2){
	                    left = this.cur - 2
	                    right = this.cur + 2
	            }else{
	                if(this.cur<=3){
	                    left = 1
	                    right = 5
	                }else{
	                    right = this.all
	                    left = this.all -4
	                }
	            }
	         }
	        while (left <= right){
	            ar.push(left)
	            left ++
	        }
	        return ar
	       }
	         
	    }
	})
	</script>
</html>
